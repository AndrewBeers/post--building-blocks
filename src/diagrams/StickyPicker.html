<:Window bind:scrollY='scrollY' />

<div class="root {{fixed ? 'fixed' : ''}}" ref:root>
    <div class="sticky base-grid">
        <div class="container">
            <h4>Change example</h4>
            {{#each examples as ex}} 
            <img 
                src="examples/input_images/{{ex}}.png" 
                alt="{{ex}}" 
                class="{{ex === $example ? 'selected' : ''}}" 
                on:click="store.set({example: ex})"
            />
            {{/each}}
        </div>
    </div>
</div>

<style>
    .root {
        position: relative;
        background: white;
        z-index: 1000000;
        height: 59px;
    }
    .container {
        grid-column: page; 
        padding: 4px;
        display: grid;
        grid-template-columns: 180px 50px 50px 50px 2fr;
    }
    h4 {
        text-transform: uppercase;
        font-size: 11px;
        font-weight: 400;
        line-height: 50px;
        margin: 0;
        opacity: 0.5;
    }
    .fixed .sticky {
        position: fixed;
    }
    .sticky {
        top: 0px;
        width: 100%;
        background: hsla(0, 0%, 99%, 1);
        border-top: solid 1px rgba(0, 0, 0, 0.1);
        border-bottom: solid 1px rgba(0, 0, 0, 0.1);
        z-index: 1000000;
        box-shadow: 0 0 6px rgba(0, 0, 0, 0.05);
    }

    .root img {
        width: 44px;
        cursor: pointer;
        opacity: 0.4;
        border: 3px solid transparent;
        border-radius: var(--border-radius);
    }

    img.selected,
    img.selected:hover {
        border-color: #ff6600;
        opacity: 0.8;
    }

    img:hover {
        opacity: 1;
    }
</style>

<script>
    const examples = require('../../static/examples').examples;

    export default {
        data() {
            return { examples };
        },

        oncreate() {
            this.observe('scrollY', scrollY => {
                const el = this.refs.root;
                const bbox = el.getBoundingClientRect();
                if (bbox.top < 0) {
                    this.set({fixed: true});
                } else {
                    this.set({ fixed: false });
                }
                console.log(bbox);
            });
        },


        methods: {

        }
    }
</script>